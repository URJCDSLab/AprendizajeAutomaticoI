\documentclass{article}\usepackage[]{graphicx}\usepackage[]{xcolor}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage[sc]{mathpazo}
\renewcommand{\sfdefault}{lmss}
\renewcommand{\ttdefault}{lmtt}
\usepackage[T1]{fontenc}
\usepackage{geometry}
\geometry{verbose,tmargin=2.5cm,bmargin=2.5cm,lmargin=2.5cm,rmargin=2.5cm}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=true,bookmarksopen=true,bookmarksopenlevel=2,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}
\hypersetup{
 pdfstartview={XYZ null null 1}}

\makeatletter
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.8}
\renewcommand{\floatpagefraction}{0.75}

\makeatother
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}



\title{}



\maketitle
The results below are generated from an R script.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{# Ejercicio 1 (tidyr y dplyr)}
\hlkwd{library}\hlstd{(tidyr)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \\\#\# Attaching package: 'tidyr'}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# The following objects are masked from 'package:Matrix':\\\#\# \\\#\# \ \ \ \ expand, pack, unpack}}\begin{alltt}
\hlcom{# A partir del siguiente dataframe realizar las siguientes operaciones de limpieza de datos:}
\hlkwd{set.seed}\hlstd{(}\hlnum{1}\hlstd{)}
\hlstd{stocks} \hlkwb{<-} \hlkwd{data.frame}\hlstd{(}
  \hlkwc{time} \hlstd{=} \hlkwd{as.Date}\hlstd{(}\hlstr{'2009-01-01'}\hlstd{)} \hlopt{+} \hlnum{0}\hlopt{:}\hlnum{9}\hlstd{,}
  \hlkwc{Walmart} \hlstd{=} \hlkwd{rnorm}\hlstd{(}\hlnum{10}\hlstd{,} \hlnum{20}\hlstd{,} \hlnum{1}\hlstd{),}
  \hlkwc{Target} \hlstd{=} \hlkwd{rnorm}\hlstd{(}\hlnum{10}\hlstd{,} \hlnum{20}\hlstd{,} \hlnum{2}\hlstd{),}
  \hlkwc{Walgreens} \hlstd{=} \hlkwd{rnorm}\hlstd{(}\hlnum{10}\hlstd{,} \hlnum{20}\hlstd{,} \hlnum{4}\hlstd{)}
\hlstd{)}
\hlcom{#       time  Walmart   Target Walgreens}
\hlcom{# 1  2009-01-01 19.37355 23.02356  23.67591}
\hlcom{# 2  2009-01-02 20.18364 20.77969  23.12855}
\hlcom{# 3  2009-01-03 19.16437 18.75752  20.29826}
\hlcom{# 4  2009-01-04 21.59528 15.57060  12.04259}
\hlcom{# 5  2009-01-05 20.32951 22.24986  22.47930}
\hlcom{# 6  2009-01-06 19.17953 19.91013  19.77549}
\hlcom{# 7  2009-01-07 20.48743 19.96762  19.37682}
\hlcom{# 8  2009-01-08 20.73832 21.88767  14.11699}
\hlcom{# 9  2009-01-09 20.57578 21.64244  18.08740}
\hlcom{# 10 2009-01-10 19.69461 21.18780  21.67177}

\hlcom{# Como se puede observar hay un problema de clave-valor en las compañias con sus observaciones.}
\hlcom{# Transformar los datos para que tengan una clave stock y el valor sea el precio. }
\hlcom{# Por lo tanto se requiere la funcion "gather".}

\hlcom{# Opcion 1:}
\hlstd{new_stocks} \hlkwb{<-} \hlkwd{gather}\hlstd{(}\hlkwc{data} \hlstd{= stocks,} \hlkwc{key} \hlstd{= stock,} \hlkwc{value} \hlstd{= price, Walmart, Target, Walgreens)}

\hlcom{# Opcion 2:}
\hlstd{new_stocks} \hlkwb{<-} \hlkwd{gather}\hlstd{(}\hlkwc{data} \hlstd{= stocks,} \hlkwc{key} \hlstd{= stock,} \hlkwc{value} \hlstd{= price, Walmart}\hlopt{:}\hlstd{Walgreens)}

\hlcom{# Opcion 3:}
\hlstd{new_stocks} \hlkwb{<-} \hlkwd{gather}\hlstd{(}\hlkwc{data} \hlstd{= stocks,} \hlkwc{key} \hlstd{= stock,} \hlkwc{value} \hlstd{= price,} \hlopt{-}\hlstd{time)}
\hlcom{# El último argumento, -time, significa que todas las columnas excepto el tiempo contienen los pares clave-valor.}


\hlcom{# Devolver el dataframe al estado original utilizando la funcion "spread".}
\hlstd{original_stocks} \hlkwb{<-} \hlkwd{spread}\hlstd{(}\hlkwc{data} \hlstd{= new_stocks,} \hlkwc{key} \hlstd{= stock,} \hlkwc{value} \hlstd{= price)}

\hlcom{# Utilizando el operador tuberia %>% se desea realizar las siguientes operaciones anidadas.}
\hlcom{# 1) Transformar los datos para que tengan una clave stock y el valor sea el precio mediante la funcion "gather".}
\hlcom{# 2) Agrupar los datos por la clave stock mediante la funcion "group_by".}
\hlcom{# 3) Obtener el precio minimo y maximo utilizando la funcion "summarise".}

\hlstd{stocks} \hlopt{%>%}
  \hlkwd{gather}\hlstd{(}\hlkwc{key} \hlstd{= stock,} \hlkwc{value} \hlstd{= price,Walmart}\hlopt{:}\hlstd{Walgreens)}\hlopt{%>%}
  \hlkwd{group_by}\hlstd{(stock)} \hlopt{%>%}
  \hlkwd{summarise}\hlstd{(}\hlkwc{min} \hlstd{=} \hlkwd{min}\hlstd{(price),} \hlkwc{max} \hlstd{=} \hlkwd{max}\hlstd{(price))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in summarise(., min = min(price), max = max(price)): no se pudo encontrar la función "{}summarise"{}}}\begin{alltt}
\hlcom{###################################################################}

\hlcom{# Ejercicio 2 (dplyr)}

\hlkwd{library}\hlstd{(dplyr)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \\\#\# Attaching package: 'dplyr'}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# The following objects are masked from 'package:arules':\\\#\# \\\#\# \ \ \ \ intersect, recode, setdiff, setequal, union}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# The following objects are masked from 'package:stats':\\\#\# \\\#\# \ \ \ \ filter, lag}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# The following objects are masked from 'package:base':\\\#\# \\\#\# \ \ \ \ intersect, setdiff, setequal, union}}\begin{alltt}
\hlkwd{library}\hlstd{(nycflights13)}

\hlcom{# COMPROBACION.}
\hlcom{# Observamos los distintos dataframes que nos proporcionan.}
\hlcom{# Utilizamos el nombre del paquete y doblemente dos puntos (::) para comprobarlo.}
\hlcom{# Tambien se puede utilizar el nombre del dataframe si previamente estamos familiarizados.}

\hlcom{# PRIMERA OBSERVACION.}
\hlcom{# Comprobamos las variables de cada uno de los datasets que nos proporcionan mediante la instrucción "head".}
\hlkwd{print}\hlstd{(}\hlkwd{head}\hlstd{(flights))}
\end{alltt}
\begin{verbatim}
## # A tibble: 6 x 19
##    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay
##   <int> <int> <int>    <int>          <int>     <dbl>    <int>          <int>     <dbl>
## 1  2013     1     1      517            515         2      830            819        11
## 2  2013     1     1      533            529         4      850            830        20
## 3  2013     1     1      542            540         2      923            850        33
## 4  2013     1     1      544            545        -1     1004           1022       -18
## 5  2013     1     1      554            600        -6      812            837       -25
## 6  2013     1     1      554            558        -4      740            728        12
## # i 10 more variables: carrier <chr>, flight <int>, tailnum <chr>, origin <chr>,
## #   dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>, minute <dbl>,
## #   time_hour <dttm>
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{head}\hlstd{(airports))}
\end{alltt}
\begin{verbatim}
## # A tibble: 6 x 8
##   faa   name                             lat   lon   alt    tz dst   tzone           
##   <chr> <chr>                          <dbl> <dbl> <dbl> <dbl> <chr> <chr>           
## 1 04G   Lansdowne Airport               41.1 -80.6  1044    -5 A     America/New_York
## 2 06A   Moton Field Municipal Airport   32.5 -85.7   264    -6 A     America/Chicago 
## 3 06C   Schaumburg Regional             42.0 -88.1   801    -6 A     America/Chicago 
## 4 06N   Randall Airport                 41.4 -74.4   523    -5 A     America/New_York
## 5 09J   Jekyll Island Airport           31.1 -81.4    11    -5 A     America/New_York
## 6 0A9   Elizabethton Municipal Airport  36.4 -82.2  1593    -5 A     America/New_York
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{head}\hlstd{(weather))}
\end{alltt}
\begin{verbatim}
## # A tibble: 6 x 15
##   origin  year month   day  hour  temp  dewp humid wind_dir wind_speed wind_gust precip
##   <chr>  <int> <int> <int> <int> <dbl> <dbl> <dbl>    <dbl>      <dbl>     <dbl>  <dbl>
## 1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4         NA      0
## 2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06        NA      0
## 3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5         NA      0
## 4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7         NA      0
## 5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7         NA      0
## 6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5         NA      0
## # i 3 more variables: pressure <dbl>, visib <dbl>, time_hour <dttm>
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{head}\hlstd{(airlines))}
\end{alltt}
\begin{verbatim}
## # A tibble: 6 x 2
##   carrier name                    
##   <chr>   <chr>                   
## 1 9E      Endeavor Air Inc.       
## 2 AA      American Airlines Inc.  
## 3 AS      Alaska Airlines Inc.    
## 4 B6      JetBlue Airways         
## 5 DL      Delta Air Lines Inc.    
## 6 EV      ExpressJet Airlines Inc.
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{head}\hlstd{(planes))}
\end{alltt}
\begin{verbatim}
## # A tibble: 6 x 9
##   tailnum  year type                    manufacturer     model  engines seats speed engine
##   <chr>   <int> <chr>                   <chr>            <chr>    <int> <int> <int> <chr> 
## 1 N10156   2004 Fixed wing multi engine EMBRAER          EMB-1~       2    55    NA Turbo~
## 2 N102UW   1998 Fixed wing multi engine AIRBUS INDUSTRIE A320-~       2   182    NA Turbo~
## 3 N103US   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-~       2   182    NA Turbo~
## 4 N104UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-~       2   182    NA Turbo~
## 5 N10575   2002 Fixed wing multi engine EMBRAER          EMB-1~       2    55    NA Turbo~
## 6 N105UW   1999 Fixed wing multi engine AIRBUS INDUSTRIE A320-~       2   182    NA Turbo~
\end{verbatim}
\begin{alltt}
\hlcom{# Comprobamos las variables de cada uno de los datasets que nos proporcionan mediante la instrucción "summary".}
\hlkwd{print}\hlstd{(}\hlkwd{summary}\hlstd{(flights))}
\end{alltt}
\begin{verbatim}
##       year          month             day           dep_time    sched_dep_time
##  Min.   :2013   Min.   : 1.000   Min.   : 1.00   Min.   :   1   Min.   : 106  
##  1st Qu.:2013   1st Qu.: 4.000   1st Qu.: 8.00   1st Qu.: 907   1st Qu.: 906  
##  Median :2013   Median : 7.000   Median :16.00   Median :1401   Median :1359  
##  Mean   :2013   Mean   : 6.549   Mean   :15.71   Mean   :1349   Mean   :1344  
##  3rd Qu.:2013   3rd Qu.:10.000   3rd Qu.:23.00   3rd Qu.:1744   3rd Qu.:1729  
##  Max.   :2013   Max.   :12.000   Max.   :31.00   Max.   :2400   Max.   :2359  
##                                                  NA's   :8255                 
##    dep_delay          arr_time    sched_arr_time   arr_delay          carrier         
##  Min.   : -43.00   Min.   :   1   Min.   :   1   Min.   : -86.000   Length:336776     
##  1st Qu.:  -5.00   1st Qu.:1104   1st Qu.:1124   1st Qu.: -17.000   Class :character  
##  Median :  -2.00   Median :1535   Median :1556   Median :  -5.000   Mode  :character  
##  Mean   :  12.64   Mean   :1502   Mean   :1536   Mean   :   6.895                     
##  3rd Qu.:  11.00   3rd Qu.:1940   3rd Qu.:1945   3rd Qu.:  14.000                     
##  Max.   :1301.00   Max.   :2400   Max.   :2359   Max.   :1272.000                     
##  NA's   :8255      NA's   :8713                  NA's   :9430                         
##      flight       tailnum             origin              dest              air_time    
##  Min.   :   1   Length:336776      Length:336776      Length:336776      Min.   : 20.0  
##  1st Qu.: 553   Class :character   Class :character   Class :character   1st Qu.: 82.0  
##  Median :1496   Mode  :character   Mode  :character   Mode  :character   Median :129.0  
##  Mean   :1972                                                            Mean   :150.7  
##  3rd Qu.:3465                                                            3rd Qu.:192.0  
##  Max.   :8500                                                            Max.   :695.0  
##                                                                          NA's   :9430   
##     distance         hour           minute        time_hour                     
##  Min.   :  17   Min.   : 1.00   Min.   : 0.00   Min.   :2013-01-01 05:00:00.00  
##  1st Qu.: 502   1st Qu.: 9.00   1st Qu.: 8.00   1st Qu.:2013-04-04 13:00:00.00  
##  Median : 872   Median :13.00   Median :29.00   Median :2013-07-03 10:00:00.00  
##  Mean   :1040   Mean   :13.18   Mean   :26.23   Mean   :2013-07-03 05:22:54.64  
##  3rd Qu.:1389   3rd Qu.:17.00   3rd Qu.:44.00   3rd Qu.:2013-10-01 07:00:00.00  
##  Max.   :4983   Max.   :23.00   Max.   :59.00   Max.   :2013-12-31 23:00:00.00  
## 
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{summary}\hlstd{(airports))}
\end{alltt}
\begin{verbatim}
##      faa                name                lat             lon         
##  Length:1458        Length:1458        Min.   :19.72   Min.   :-176.65  
##  Class :character   Class :character   1st Qu.:34.26   1st Qu.:-119.19  
##  Mode  :character   Mode  :character   Median :40.09   Median : -94.66  
##                                        Mean   :41.65   Mean   :-103.39  
##                                        3rd Qu.:45.07   3rd Qu.: -82.52  
##                                        Max.   :72.27   Max.   : 174.11  
##       alt                tz              dst               tzone          
##  Min.   : -54.00   Min.   :-10.000   Length:1458        Length:1458       
##  1st Qu.:  70.25   1st Qu.: -8.000   Class :character   Class :character  
##  Median : 473.00   Median : -6.000   Mode  :character   Mode  :character  
##  Mean   :1001.42   Mean   : -6.519                                        
##  3rd Qu.:1062.50   3rd Qu.: -5.000                                        
##  Max.   :9078.00   Max.   :  8.000
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{summary}\hlstd{(weather))}
\end{alltt}
\begin{verbatim}
##     origin               year          month             day             hour      
##  Length:26115       Min.   :2013   Min.   : 1.000   Min.   : 1.00   Min.   : 0.00  
##  Class :character   1st Qu.:2013   1st Qu.: 4.000   1st Qu.: 8.00   1st Qu.: 6.00  
##  Mode  :character   Median :2013   Median : 7.000   Median :16.00   Median :11.00  
##                     Mean   :2013   Mean   : 6.504   Mean   :15.68   Mean   :11.49  
##                     3rd Qu.:2013   3rd Qu.: 9.000   3rd Qu.:23.00   3rd Qu.:17.00  
##                     Max.   :2013   Max.   :12.000   Max.   :31.00   Max.   :23.00  
##                                                                                    
##       temp             dewp           humid           wind_dir       wind_speed      
##  Min.   : 10.94   Min.   :-9.94   Min.   : 12.74   Min.   :  0.0   Min.   :   0.000  
##  1st Qu.: 39.92   1st Qu.:26.06   1st Qu.: 47.05   1st Qu.:120.0   1st Qu.:   6.905  
##  Median : 55.40   Median :42.08   Median : 61.79   Median :220.0   Median :  10.357  
##  Mean   : 55.26   Mean   :41.44   Mean   : 62.53   Mean   :199.8   Mean   :  10.518  
##  3rd Qu.: 69.98   3rd Qu.:57.92   3rd Qu.: 78.79   3rd Qu.:290.0   3rd Qu.:  13.809  
##  Max.   :100.04   Max.   :78.08   Max.   :100.00   Max.   :360.0   Max.   :1048.361  
##  NA's   :1        NA's   :1       NA's   :1        NA's   :460     NA's   :4         
##    wind_gust         precip            pressure          visib       
##  Min.   :16.11   Min.   :0.000000   Min.   : 983.8   Min.   : 0.000  
##  1st Qu.:20.71   1st Qu.:0.000000   1st Qu.:1012.9   1st Qu.:10.000  
##  Median :24.17   Median :0.000000   Median :1017.6   Median :10.000  
##  Mean   :25.49   Mean   :0.004469   Mean   :1017.9   Mean   : 9.255  
##  3rd Qu.:28.77   3rd Qu.:0.000000   3rd Qu.:1023.0   3rd Qu.:10.000  
##  Max.   :66.75   Max.   :1.210000   Max.   :1042.1   Max.   :10.000  
##  NA's   :20778                      NA's   :2729                     
##    time_hour                    
##  Min.   :2013-01-01 01:00:00.0  
##  1st Qu.:2013-04-01 21:30:00.0  
##  Median :2013-07-01 14:00:00.0  
##  Mean   :2013-07-01 18:26:37.7  
##  3rd Qu.:2013-09-30 13:00:00.0  
##  Max.   :2013-12-30 18:00:00.0  
## 
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{summary}\hlstd{(airlines))}
\end{alltt}
\begin{verbatim}
##    carrier              name          
##  Length:16          Length:16         
##  Class :character   Class :character  
##  Mode  :character   Mode  :character
\end{verbatim}
\begin{alltt}
\hlkwd{print}\hlstd{(}\hlkwd{summary}\hlstd{(planes))}
\end{alltt}
\begin{verbatim}
##    tailnum               year          type           manufacturer      
##  Length:3322        Min.   :1956   Length:3322        Length:3322       
##  Class :character   1st Qu.:1997   Class :character   Class :character  
##  Mode  :character   Median :2001   Mode  :character   Mode  :character  
##                     Mean   :2000                                        
##                     3rd Qu.:2005                                        
##                     Max.   :2013                                        
##                     NA's   :70                                          
##     model              engines          seats           speed          engine         
##  Length:3322        Min.   :1.000   Min.   :  2.0   Min.   : 90.0   Length:3322       
##  Class :character   1st Qu.:2.000   1st Qu.:140.0   1st Qu.:107.5   Class :character  
##  Mode  :character   Median :2.000   Median :149.0   Median :162.0   Mode  :character  
##                     Mean   :1.995   Mean   :154.3   Mean   :236.8                     
##                     3rd Qu.:2.000   3rd Qu.:182.0   3rd Qu.:432.0                     
##                     Max.   :4.000   Max.   :450.0   Max.   :432.0                     
##                                                     NA's   :3299
\end{verbatim}
\begin{alltt}
\hlcom{# Simplificar los dataframes originales a 100 observaciones. Renombrarlos introduciendo la coletilla "_simple".}

\hlstd{flights_simple} \hlkwb{<-} \hlkwd{head}\hlstd{(flights,}\hlnum{100}\hlstd{)}
\hlstd{airports_simple} \hlkwb{<-} \hlkwd{head}\hlstd{(airports,}\hlnum{100}\hlstd{)}
\hlstd{weather_simple} \hlkwb{<-} \hlkwd{head}\hlstd{(weather,}\hlnum{100}\hlstd{)}
\hlstd{airlines_simple} \hlkwb{<-} \hlkwd{head}\hlstd{(airlines,}\hlnum{100}\hlstd{)}
\hlstd{planes_simple} \hlkwb{<-} \hlkwd{head}\hlstd{(planes,}\hlnum{100}\hlstd{)}


\hlcom{# Selecciona los tipos de aerolinea ("carrier") mediante la instruccion "select" y el operador "unique" concatenados con el operador tuberia %>%.}
\hlstd{airlines_simple} \hlopt{%>%} \hlstd{unique} \hlopt{%>%} \hlkwd{select}\hlstd{(carrier)}
\end{alltt}
\begin{verbatim}
## # A tibble: 16 x 1
##    carrier
##    <chr>  
##  1 9E     
##  2 AA     
##  3 AS     
##  4 B6     
##  5 DL     
##  6 EV     
##  7 F9     
##  8 FL     
##  9 HA     
## 10 MQ     
## 11 OO     
## 12 UA     
## 13 US     
## 14 VX     
## 15 WN     
## 16 YV
\end{verbatim}
\begin{alltt}
\hlcom{# Obtener la media y el maximo de asientos ("seats") que tienen los aviones. Utilizar el operador tuberia %>%.}
\hlstd{planes_simple} \hlopt{%>%} \hlkwd{summarise}\hlstd{(}\hlkwc{mean} \hlstd{=} \hlkwd{mean}\hlstd{(seats),}\hlkwc{max_engines} \hlstd{=} \hlkwd{max}\hlstd{(seats))}
\end{alltt}
\begin{verbatim}
## # A tibble: 1 x 2
##    mean max_engines
##   <dbl>       <int>
## 1  105.         330
\end{verbatim}
\begin{alltt}
\hlcom{# Ordenar los aviones por numero de motores ("engines") y numero de asientos ("seats").}
\hlstd{result1} \hlkwb{<-} \hlkwd{arrange}\hlstd{(planes_simple,engines,seats)}
\hlkwd{print}\hlstd{(result1)}
\end{alltt}
\begin{verbatim}
## # A tibble: 100 x 9
##    tailnum  year type                    manufacturer model     engines seats speed engine
##    <chr>   <int> <chr>                   <chr>        <chr>       <int> <int> <int> <chr> 
##  1 N10156   2004 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  2 N10575   2002 Fixed wing multi engine EMBRAER      EMB-145LR       2    55    NA Turbo~
##  3 N11106   2002 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  4 N11107   2002 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  5 N11109   2002 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  6 N11113   2002 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  7 N11119   2002 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  8 N11121   2003 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
##  9 N11127   2003 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
## 10 N11137   2003 Fixed wing multi engine EMBRAER      EMB-145XR       2    55    NA Turbo~
## # i 90 more rows
\end{verbatim}
\begin{alltt}
\hlcom{# Averigua que numero de cola comparten los dataframes "flights_simple" y "planes_simple" que has creado anteriormente.}
\hlcom{# Obten su aerolinea ("carrier")}
\hlstd{shared} \hlkwb{<-} \hlkwd{inner_join}\hlstd{(flights_simple,planes_simple,}\hlkwc{by}\hlstd{=}\hlstr{"tailnum"}\hlstd{)} \hlcom{# -> N14228}
\hlstd{shared_carrier} \hlkwb{<-} \hlstd{shared}\hlopt{$}\hlstd{carrier}
\hlkwd{print}\hlstd{(shared_carrier)}
\end{alltt}
\begin{verbatim}
## [1] "EV"
\end{verbatim}
\begin{alltt}
\hlcom{# Cruzar los datos de vuelos ("flights") con los aviones ("planes") por el numero de cola ("tailnum") que no coincidan.}
\hlcom{# De esos obtener aquellos con 2 o mas motores.}
\hlcom{# Finlmente obtener los distintos modelos de avión que satisfacen las premisas anteriores.}
\hlstd{fp} \hlkwb{<-} \hlkwd{anti_join}\hlstd{(planes_simple,flights_simple,}\hlkwc{by}\hlstd{=}\hlstr{"tailnum"}\hlstd{)}
\hlstd{engines_fp} \hlkwb{<-} \hlkwd{filter}\hlstd{(fp,engines} \hlopt{>=} \hlnum{2}\hlstd{)}
\hlstd{result2} \hlkwb{<-} \hlkwd{unique}\hlstd{(engines_fp}\hlopt{$}\hlstd{model)} \hlcom{# No queremos los repetidos. Por lo tanto usamos "unique".}
\hlkwd{print}\hlstd{(result2)}
\end{alltt}
\begin{verbatim}
## [1] "EMB-145XR" "A320-214"  "EMB-145LR" "737-824"   "767-332"   "757-224"
\end{verbatim}
\begin{alltt}
\hlcom{# Crea una nueva variable que calcule el retraso total sumando los delays acumulados ("dep_delay") y ("arr_delay").}
\hlcom{# Almacena el dataframe resultante en "flights_total".}
\hlstd{flights_total} \hlkwb{<-} \hlkwd{mutate}\hlstd{(flights_simple,}\hlkwc{total_delay}\hlstd{=dep_delay}\hlopt{+}\hlstd{arr_delay)}

\hlcom{# En base a la variable anteriormente obtenida, devuelve los aviones que han llegado con antelacion a su destino.}
\hlkwd{filter}\hlstd{(flights_total,total_delay} \hlopt{<} \hlnum{0}\hlstd{)}
\end{alltt}
\begin{verbatim}
## # A tibble: 57 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay
##    <int> <int> <int>    <int>          <int>     <dbl>    <int>          <int>     <dbl>
##  1  2013     1     1      544            545        -1     1004           1022       -18
##  2  2013     1     1      554            600        -6      812            837       -25
##  3  2013     1     1      557            600        -3      709            723       -14
##  4  2013     1     1      557            600        -3      838            846        -8
##  5  2013     1     1      558            600        -2      849            851        -2
##  6  2013     1     1      558            600        -2      853            856        -3
##  7  2013     1     1      558            600        -2      923            937       -14
##  8  2013     1     1      559            559         0      702            706        -4
##  9  2013     1     1      559            600        -1      854            902        -8
## 10  2013     1     1      600            600         0      851            858        -7
## # i 47 more rows
## # i 11 more variables: carrier <chr>, flight <int>, tailnum <chr>, origin <chr>,
## #   dest <chr>, air_time <dbl>, distance <dbl>, hour <dbl>, minute <dbl>,
## #   time_hour <dttm>, total_delay <dbl>
\end{verbatim}
\end{kframe}
\end{knitrout}

The R session information (including the OS info, R version and all
packages used):

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{sessionInfo}\hlstd{()}
\end{alltt}
\begin{verbatim}
## R version 4.3.1 (2023-06-16)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 20.04.6 LTS
## 
## Matrix products: default
## BLAS:   /usr/lib/x86_64-linux-gnu/atlas/libblas.so.3.10.3 
## LAPACK: /usr/lib/x86_64-linux-gnu/atlas/liblapack.so.3.10.3;  LAPACK version 3.9.0
## 
## locale:
##  [1] LC_CTYPE=es_ES.UTF-8       LC_NUMERIC=C               LC_TIME=es_ES.UTF-8       
##  [4] LC_COLLATE=es_ES.UTF-8     LC_MONETARY=es_ES.UTF-8    LC_MESSAGES=es_ES.UTF-8   
##  [7] LC_PAPER=es_ES.UTF-8       LC_NAME=C                  LC_ADDRESS=C              
## [10] LC_TELEPHONE=C             LC_MEASUREMENT=es_ES.UTF-8 LC_IDENTIFICATION=C       
## 
## time zone: Europe/Madrid
## tzcode source: system (glibc)
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] nycflights13_1.0.2 dplyr_1.1.3        tidyr_1.3.0        knitr_1.44        
## [5] factoextra_1.0.7   ggplot2_3.4.3      arules_1.7-6       Matrix_1.6-1.1    
## 
## loaded via a namespace (and not attached):
##  [1] gtable_0.3.4         xfun_0.40            recipes_1.0.8        ggrepel_0.9.3       
##  [5] lattice_0.21-9       vctrs_0.6.3          tools_4.3.1          generics_0.1.3      
##  [9] stats4_4.3.1         parallel_4.3.1       tibble_3.2.1         fansi_1.0.5         
## [13] highr_0.10           pkgconfig_2.0.3      ModelMetrics_1.2.2.2 data.table_1.14.8   
## [17] lifecycle_1.0.3      farver_2.1.1         compiler_4.3.1       stringr_1.5.0       
## [21] tinytex_0.47         munsell_0.5.0        codetools_0.2-19     DALEX_2.4.3         
## [25] htmltools_0.5.6.1    class_7.3-22         yaml_2.3.7           prodlim_2023.08.28  
## [29] pillar_1.9.0         MASS_7.3-60          gower_1.0.1          iterators_1.0.14    
## [33] rpart_4.1.19         foreach_1.5.2        nlme_3.1-163         parallelly_1.36.0   
## [37] lava_1.7.2.1         tidyselect_1.2.0     digest_0.6.33        stringi_1.7.12      
## [41] future_1.33.0        reshape2_1.4.4       purrr_1.0.2          listenv_0.9.0       
## [45] labeling_0.4.3       splines_4.3.1        cowplot_1.1.1        fastmap_1.1.1       
## [49] grid_4.3.1           colorspace_2.1-0     cli_3.6.1            magrittr_2.0.3      
## [53] survival_3.5-7       utf8_1.2.3           future.apply_1.11.0  withr_2.5.1         
## [57] scales_1.2.1         xgboost_1.7.5.1      lubridate_1.9.3      timechange_0.2.0    
## [61] rmarkdown_2.25       globals_0.16.2       nnet_7.3-19          timeDate_4022.108   
## [65] evaluate_0.22        hardhat_1.3.0        caret_6.0-94         rlang_1.1.1         
## [69] Rcpp_1.0.11          glue_1.6.2           pROC_1.18.4          ipred_0.9-14        
## [73] rstudioapi_0.15.0    jsonlite_1.8.7       R6_2.5.1             plyr_1.8.9
\end{verbatim}
\begin{alltt}
\hlkwd{Sys.time}\hlstd{()}
\end{alltt}
\begin{verbatim}
## [1] "2023-10-31 22:29:49 CET"
\end{verbatim}
\end{kframe}
\end{knitrout}


\end{document}
